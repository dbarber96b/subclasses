AddSubClass("sorcerer", "myrddins legacy", {
	regExpSearch : /^(?=.*myrddin)(?=.*legacy)(?=.*(fey)).*$/i,
	subname : "Myrddin's Legacy",
	source : ["GMBDB"],
	spellcastingExtra : ["shield", "bane", "calm emotions", "find steed", "crusader's mantle", "elemental weapon", "aura of purity", "control water", "dispel evil and good", "holy weapon"],
	features : {
		"subclassfeature1" : {
			name : "Mask of the Courts",
			source : ["GMBDB"],
			minlevel : 1,
			description : desc([
				"I can cast disguise self at will without using a spell slot",
				"This spell counts as a sorcerer spell for me, but doesn't count against my number of spells known"
			]),
			spellcastingBonus : {
				name : "Mask of the Courts",
				spells : ["disguise self"],
				selection : ["disguise self"]
			}
		},
		"subclassfeature3" : {
			name : "Aspects of the Vale",
			source : ["GMBDB"],
			minlevel : 3,
			description : desc([
				"I gain proficiency with the Insight skill",
				"I also have advantage on Wisdom (Insight) checks when determining a creature's emotional state",
                "I can't be put to sleep by magic, and I have advantage on saves against the effect of the calm emotions spell",
                "I can speak, read, and write Sylvan, and I can use a druidic focus as my spell casting focus"
			]),
			skillstxt : "Insight",
      languageProfs : ["Sylvan"],
      savetxt : { immune : ["calm emotions"] },
		adv_vs : ["charmed"]
    },
		"subclassfeature6" : {
			name : "A Wink and a Nod",
			source : ["GMBDB"],
			minlevel : 6,
            action : ["bonus action", ""],
			description : " [2 sorcery points]" + desc([
				"By spending 2 sorcery points, I can turn invisible and magically teleport up to 30 feet to an unoccupied space that I can see",
				"I remain invisible until the start of my next turn, or until I attack or cast a spell"
			])
      
		},
		"subclassfeature14" : {
			name : "Travel the Realms",
			source : ["GMBDB"],
			minlevel : 1,
			description : desc([
				"I can learn the teleport spell if I don't already know it",
				"This spell doesn't count against my number of spells known",
        
			]),
			spellcastingBonus : {
				name : "Travel the Realms",
				spells : ["teleport"],
				selection : ["teleport"]
			}
		},
		"subclassfeature18" : {
			name : "Myrddin's Inheritance",
			source : ["GMBDB"],
			minlevel : 6,
      usages : "Charisma modifier per ",
			usagescalc : "event.value = Math.max(1, What('Cha Mod'));",
			recovery : "long rest",
			description : "\n   " + "I become immune to all effects that charm, frighten, or put me to sleep" + "\n   " + "I can extend an 30 foot aura. All creatures of the humanoid or beast type must succeed a Charisma saving throw when they start their turn in the aura or be charmed" + "\n   " + "I can spend 5 sorcery points to give all creatures disadvantage on this save",
			action : ["bonus action"],
			savetxt : { immune : ["charmed", "sleep", "frightened"] }
		}
	}
});
