  
/*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.

	-KEEP IN MIND-
	It is recommended to enter the code in a fresh sheet before adding any other information (i.e. before making your character with it).
*/

/*	-INFORMATION-
	Subject:	Subclass
	Effect:		This script adds a new subclass for warlocks
				
	Code by:	dbarber96b
	Date:		2021-08-9 (sheet v13.0.0beta16)
*/

var iFileName = "GamemasterPatron.js";
RequiredSheetVersion(13);

SourceList["GMBDB"] = {
	name : "GMBinderDBarber96b",
	abbreviation : ["GMBDB"],
	group : "Dbarber96b",
	url : "https://www.gmbinder.com/share/-MdN8Kx_JYwIkby0V7kG",
	date : "2021/08/09"
};
AddSubClass("warlock", "the gamemaster", {
	regExpSearch : /^(?=.*gamemaster)(?=.*warlock).*$/i,
	subname : "the Gamemaster",
	source : ["GMBDB"],
	spellcastingExtra : ["bane", "dissonant whispers", "detect thoughts", "enhance ability", "clairvoyance", "tiny servant", "confusion", "phantasmal killer", "animate object", "geas"],
	features : {
		"subclassfeature1" : {
			name : "Gambler's Tools",
			source : ["GMBDB"],
			minlevel : 1,
			description : "\n   " + "I gain expertise with two gaming sets of my choice, and I can use them as my arcane focus"+ " \n   " + "I also gain proficiency with rapiers",
			toolProfs : [["Gaming sets", 2]],
			weaponProfs : [false, false, ["rapier"]]
		},
   		"subclassfeature1.1" : {
			name : "Siphon Luck",
			source : ["GMBDB"],
			minlevel : 1,
			description : desc([
				"As a bonus action, I choose one creature I can see within 60 feet of me and choose one ability score.",
				"Whenever that creature makes an ability check with the chosen ability score, it must roll a d4 and subtract the number rolled from the ability check.",
				"An affected creature remains unlucky until you finish a short or long rest, until you are knocked unconscious, or until you use this feature again.",
				"The d4 becomes a d6 at 6th level, a d8 at 10th level, and a d10 at 14th level."
			]),
			usages : "Charisma modifier per ",
			usagescalc : "event.value = Math.max(1, What('Cha Mod'));",
			recovery : "long rest",
			action : ["bonus action", ""]
		},
		"subclassfeature6" : {
			name : "House Advantage",
			source : ["GMBDB"],
			minlevel : 1,
			description : desc([
				"As a reaction, If I roll a natural 1, I may reroll the die and take the higher number.",
				"If I roll another 1, it is considered a natural 20."
			]),
			usages : "Charisma modifier per ",
			usagescalc : "event.value = Math.max(1, What('Cha Mod'));",
			recovery : "long rest",
			action : ["reaction", ""]
		},
		"subclassfeature10" : {
			name : "Honed Composure",
			source : ["GMBDB"],
			minlevel : 10,
			description : "\n   " + "Any creature under the effect of my Siphon Luck feature has disadvantage on attack rolls against me." + "\n   " + "If an unlucky creature misses me with an attack, I can use my reaction to attempt to frighten that creature." + "\n   " + "That creature must succeed on a Wisdom saving throw against my spell save DC or be frightened until the end of its next turn." + "\n   " + "I now have advantage on saving throws against being frightened or charmed",
			action : ["reaction", " (when attacked)"],
			savetxt : { adv_vs : ["frightened", "charmed"] },
		},
		"subclassfeature14" : {
			name : "Deadly Ultimatum",
			source : ["GMBDB"],
			minlevel : 14,
			description : "\n   " + "As an action, I forbid a creature within 60 ft from a certain action" + "\n   " + "If the creature performs the forbidden action, it must make a Wisdom saving throw against my spell save DC, taking 8d6 psychic damage on a failure." + "\n   " + "If it succeeds, this ends the ultimatum.",
			recovery : "long rest",
			usages : 1,
			action : ["action", ""]
		}
	}
});
